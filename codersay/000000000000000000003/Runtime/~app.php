<?php  global $cfg_photo_type,$cfg_photo_typenames,$cfg_photo_support; $cfg_photo_type['gif'] = false; $cfg_photo_type['jpeg'] = false; $cfg_photo_type['png'] = false; $cfg_photo_type['wbmp'] = false; $cfg_photo_typenames = Array(); $cfg_photo_support = ''; if(function_exists("imagecreatefromgif") && function_exists("imagegif")) { $cfg_photo_type["gif"] = true; $cfg_photo_typenames[] = "image/gif"; $cfg_photo_support .= "GIF "; } if(function_exists("imagecreatefromjpeg") && function_exists("imagejpeg")) { $cfg_photo_type["jpeg"] = true; $cfg_photo_typenames[] = "image/pjpeg"; $cfg_photo_typenames[] = "image/jpeg"; $cfg_photo_support .= "JPEG "; } if(function_exists("imagecreatefrompng") && function_exists("imagepng")) { $cfg_photo_type["png"] = true; $cfg_photo_typenames[] = "image/png"; $cfg_photo_typenames[] = "image/xpng"; $cfg_photo_support .= "PNG "; } if(function_exists("imagecreatefromwbmp") && function_exists("imagewbmp")) { $cfg_photo_type["wbmp"] = true; $cfg_photo_typenames[] = "image/wbmp"; $cfg_photo_support .= "WBMP "; } function ImageResize($srcFile,$toW,$toH,$toFile="") { global $cfg_photo_type; if($toFile=='') $toFile = $srcFile; $info = ''; $srcInfo = GetImageSize($srcFile,$info); switch ($srcInfo[2]) { case 1: if(!$cfg_photo_type['gif']) return false; $im = imagecreatefromgif($srcFile); break; case 2: if(!$cfg_photo_type['jpeg']) return false; $im = imagecreatefromjpeg($srcFile); break; case 3: if(!$cfg_photo_type['png']) return false; $im = imagecreatefrompng($srcFile); break; case 6: if(!$cfg_photo_type['bmp']) return false; $im = imagecreatefromwbmp($srcFile); break; } $srcW=ImageSX($im); $srcH=ImageSY($im); if($srcW<=$toW && $srcH<=$toH ) return true; $toWH=$toW/$toH; $srcWH=$srcW/$srcH; if($toWH<=$srcWH) { $ftoW=$toW; $ftoH=$ftoW*($srcH/$srcW); } else { $ftoH=$toH; $ftoW=$ftoH*($srcW/$srcH); } if($srcW>$toW||$srcH>$toH) { if(function_exists("imagecreatetruecolor")) { @$ni = imagecreatetruecolor($ftoW,$ftoH); if($ni) { imagecopyresampled($ni,$im,0,0,0,0,$ftoW,$ftoH,$srcW,$srcH); } else { $ni=imagecreate($ftoW,$ftoH); imagecopyresized($ni,$im,0,0,0,0,$ftoW,$ftoH,$srcW,$srcH); } } else { $ni=imagecreate($ftoW,$ftoH); imagecopyresized($ni,$im,0,0,0,0,$ftoW,$ftoH,$srcW,$srcH); } switch ($srcInfo[2]) { case 1: imagegif($ni,$toFile); break; case 2: imagejpeg($ni,$toFile,100); break; case 3: imagepng($ni,$toFile); break; case 6: imagebmp($ni,$toFile); break; default: return false; } imagedestroy($ni); } imagedestroy($im); return true; } function getFckEditor($fname, $fvalue, $nheight="350", $toolBarSet="HC", $gtype="", $fullPage="false") { require_once('Public/js/fckeditor/fckeditor.php'); $fck = new FCKeditor($fname); $fck->BasePath = WEB_PUBLIC_PATH.'/js/fckeditor/'; $fck->Width = '100%' ; $fck->Height = $nheight ; $fck->ToolbarSet = $toolBarSet ; $fck->Config['FullPage'] = $fullpage; $fck->Value = $fvalue; if($gtype=="print") { $fck->Create(); } else { return $fck->CreateHtml(); } } return array ( 'app_debug' => false, 'app_domain_deploy' => false, 'app_plugin_on' => false, 'app_file_case' => false, 'app_group_depr' => '.', 'app_group_list' => 'Admin,Home', 'app_autoload_reg' => false, 'app_autoload_path' => 'Think.Util.', 'app_config_list' => array ( 0 => 'taglibs', 1 => 'routes', 2 => 'tags', 3 => 'htmls', 4 => 'modules', 5 => 'actions', ), 'cookie_expire' => 3600, 'cookie_domain' => '', 'cookie_path' => '/', 'cookie_prefix' => '', 'default_app' => '@', 'default_group' => 'Home', 'default_module' => 'Index', 'default_action' => 'index', 'default_charset' => 'utf-8', 'default_timezone' => 'PRC', 'default_ajax_return' => 'JSON', 'default_theme' => 'default', 'default_lang' => 'zh-cn', 'db_type' => 'mysql', 'db_host' => 'localhost', 'db_name' => 'codersay', 'db_user' => 'root', 'db_pwd' => '', 'db_port' => '3306', 'db_prefix' => '', 'db_suffix' => '', 'db_fieldtype_check' => false, 'db_fields_cache' => false, 'db_charset' => 'utf8', 'db_deploy_type' => 0, 'db_rw_separate' => false, 'data_cache_time' => -1, 'data_cache_compress' => false, 'data_cache_check' => false, 'data_cache_type' => 'File', 'data_cache_path' => './Runtime/Temp/', 'data_cache_subdir' => false, 'data_path_level' => 1, 'error_message' => '您浏览的页面暂时发生了错误！请稍后再试～', 'error_page' => '', 'html_cache_on' => false, 'html_cache_time' => 60, 'html_read_type' => 0, 'html_file_suffix' => '.shtml', 'lang_switch_on' => false, 'lang_auto_detect' => true, 'log_record' => false, 'log_file_size' => 2097152, 'log_record_level' => array ( 0 => 'EMERG', 1 => 'ALERT', 2 => 'CRIT', 3 => 'ERR', ), 'page_rollpage' => 5, 'page_listrows' => 20, 'session_auto_start' => true, 'show_run_time' => false, 'show_adv_time' => false, 'show_db_times' => false, 'show_cache_times' => false, 'show_use_mem' => false, 'show_page_trace' => false, 'show_error_msg' => true, 'tmpl_engine_type' => 'Think', 'tmpl_detect_theme' => false, 'tmpl_template_suffix' => '.html', 'tmpl_cachfile_suffix' => '.php', 'tmpl_deny_func_list' => 'echo,exit', 'tmpl_parse_string' => '', 'tmpl_l_delim' => '{', 'tmpl_r_delim' => '}', 'tmpl_var_identify' => 'array', 'tmpl_strip_space' => false, 'tmpl_cache_on' => false, 'tmpl_cache_time' => -1, 'tmpl_action_error' => 'Public:success', 'tmpl_action_success' => 'Public:success', 'tmpl_trace_file' => 'ThinkPHP/Tpl/PageTrace.tpl.php', 'tmpl_exception_file' => 'ThinkPHP/Tpl/ThinkException.tpl.php', 'tmpl_file_depr' => '/', 'taglib_begin' => '<', 'taglib_end' => '>', 'taglib_load' => true, 'taglib_build_in' => 'cx', 'taglib_pre_load' => '', 'tag_nested_level' => 3, 'tag_extend_parse' => '', 'token_on' => true, 'token_name' => '__hash__', 'token_type' => 'md5', 'url_case_insensitive' => true, 'url_router_on' => false, 'url_dispatch_on' => true, 'url_model' => 3, 'url_pathinfo_model' => 2, 'url_pathinfo_depr' => '/', 'url_html_suffix' => '', 'var_group' => 'g', 'var_module' => 'm', 'var_action' => 'a', 'var_router' => 'r', 'var_page' => 'p', 'var_template' => 't', 'var_language' => 'l', 'var_ajax_submit' => 'ajax', 'var_pathinfo' => 's', ); ?>