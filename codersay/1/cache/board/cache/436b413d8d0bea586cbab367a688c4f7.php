<?php if (!defined('THINK_PATH')) exit();?><!doctype html><html><head><title><?php echo C('SITE_TITLE');?></title><meta charset="utf-8" /><script type="text/javascript"> var module = '<?php echo strtolower(MODULE_NAME); ?>'; var action = '<?php echo ACTION_NAME;?>'; var tag_id = '<?php echo ($_GET["tag"]); ?>'; var node = '<?php echo ($_GET["node"]); ?>'; </script><link rel="stylesheet" type="text/css" href="../Public/style/layout.css" /><script type="text/javascript" src="__JS__/jQuery/jquery.js"></script><script type="text/javascript" src="__JS__/jQuery/plugin/cookie.js"></script><script type="text/javascript" src="__JS__/NDlogpublic.js"></script><script type="text/javascript" src="../Public/js/common.js"></script><script type="text/javascript">			jQuery(document).ready(function($){
				NDlog._setTableStyle( 'input[name="all"]', 'input[name="ids[]"]', '.rows_style' );
				$('.esort').dblclick(function(){
					var id = $(this).attr('rel');
					var ovalue = $(this).text();
					$(this).html('<input type="text" name="sort_one" id="edit_'+id+'" class="t_input" style="width:24px;" value="'+ovalue+'" />');
					$('#edit_'+id).focus().live('blur',function(){
						var value = $(this).val();
						if ( !/^\d+$/.test(value) ){
							alert('排序必须为正整数！');
							return false;
						}else{
							$(this).parent().html(value);
							if ( ovalue != value ){
								$.post('<?php echo U("updateOneSort");?>',{id:id,sort:value});
							}
						}
					});
				});
			});
		</script><style type="text/css" media="all">			.page_tit	{ font-weight: bold; padding-bottom: 10px; }
			.so_main	{ padding-bottom: 20px; }
		</style></head><body><div id="wrap"><div id="header"><ul class="nav"><li class="home" rel="index"><a href="__APP__">首页</a></li><?php if(is_array($root_node)): $i = 0; $__LIST__ = $root_node;if( count($__LIST__)==0 ) : echo "" ;else: foreach($__LIST__ as $key=>$root): $mod = ($i % 2 );++$i; $action = $root['action']; if( empty( $root['action'] ) ){ $action = 'index'; } ?><li class="li <?php echo ($root["module"]); ?>" rel="<?php echo ($root["module"]); ?>"><a href="<?php echo U($root['module'].'/'.$action,array('node'=>$root['id']));?>"><?php echo ($root["name"]); ?></a></li><?php endforeach; endif; else: echo "" ;endif; ?><li class="li logout" rel="logout"><a href="<?php echo U('public/logout');?>">注销</a></li></ul></div><div id="container"><div id="sidebar_switch"></div><div id="content"><div id="c_warp"><?php foreach($list as $type=>$value) { ?><div class="so_main"><div class="page_tit"><?php echo ($value['name']); ?></div><div class="Toolbar_inbox"></div><div class="list"><table id="plugInTable" width="100%" cellpadding="0" cellspacing="0" border="0" class="table_list"><tr><th align="center" width="40">排序</th><th class="line_l">插件名称</th><th class="line_l">插件作者</th><th class="line_l">插件版本</th><th class="line_l">插件说明</th><th class="line_l">操作</th></tr><?php if(empty($value['data'])) { } if(is_array($value["data"])): $i = 0; $__LIST__ = $value["data"];if( count($__LIST__)==0 ) : echo "" ;else: foreach($__LIST__ as $key=>$vo): $mod = ($i % 2 );++$i;?><tr overstyle='on' id="<?php echo ($vo['name']); ?>" class="rows_style"<?php if( ( $i % 2 ) == 0 ){ ?> bgcolor="#f9f9f9"<?php }else{ ?> bgcolor="#ffffff"<?php } ?>><td align="center" rel="<?php echo ($vo["id"]); ?>" class="esort"><?php echo ($vo["sort"]); ?></td><td><?php if ( !isset( $vo['pluginName'] ) ) { echo $vo['title']; }else{ echo $vo['pluginName']; } ?></td><td align="center"><?php if ( !isset( $vo['site'] ) ){ $url = $vo['uri']; }else{ $url = $vo['site']; } if($url){ ?><a href="<?php echo ($url); ?>"><?php echo ($vo['author']); ?></a><?php }else{ echo ($vo['author']); } ?></td><td align="center"><?php echo ($vo['version']); ?></td><td><?php if ( !isset( $vo['info'] ) ) { echo $vo['remark']; }else{ echo $vo['info']; } ?></td><td align="center"><?php if($type == "valid"){ $uninstall_href = U('plugins/stopAddon',array('addonId'=>$vo['id'])); $uninstall_alert_1 = '确定停用该插件?'; ?><a href="javascript:void(0);" onclick="if(confirm('<?php echo ($uninstall_alert_1); ?>')) location.href='<?php echo ($uninstall_href); ?>';return false;">停用</a><?php }else{ $install_href = U('plugins/startAddon',array('name'=>$vo['name'])); if($vo['sqlfile']){ $install_alert_1 = '初次启用该插件时将会进行sql操作，且无法恢复，强烈建议您备份数据库后再启用，确定继续?'; }else{ $install_alert_1 = '确定启用该插件？'; } ?><a href="javascript:void(0);" onclick="if(confirm('<?php echo ($install_alert_1); ?>')) location.href='<?php echo ($install_href); ?>';return false;">启用</a><?php } if($vo['admin'] && $type == "valid"){ $href = U('plugins/admin',array('pluginid'=>$vo['id'],'node'=>$_GET['node'])); ?><span class="c_line">|</span><a href="javascript:void(0);" onclick="location.href='<?php echo ($href); ?>';return false;">管理</a><?php } ?></td></tr><?php endforeach; endif; else: echo "" ;endif; ?></table></div><div class="Toolbar_inbox"></div></div><?php } ?></div></div><div id="sidebar"><div id="user_info"><div class="avatar"><img src="<?php echo (getuseravatar($_SESSION['AUTH']['id'])); ?>" width="45" /></div><dl class="info"><dt><?php echo ($_SESSION['AUTH']['nickname']); ?><dt><dd><?php echo ($_SESSION['AUTH']['remark']); ?></dd></dl><div class="clear"></div></div><?php if( $sidebar ){ ?><ol class="action_list"><?php if(is_array($sidebar)): $i = 0; $__LIST__ = $sidebar;if( count($__LIST__)==0 ) : echo "" ;else: foreach($__LIST__ as $key=>$sidebar): $mod = ($i % 2 );++$i; if ( !empty( $sidebar['type_name'] ) ){ $json = json_decode($sidebar['type_name'],true); }else{ $json = array(); } $node['node'] = $sidebar['pid']; $node['tag'] = $sidebar['id']; $param = array_merge( $json, $node ); ?><li rel="<?php echo ($sidebar["module"]); ?>_<?php echo ($sidebar["action"]); ?>" tag="<?php echo ($sidebar["id"]); ?>"><a href="<?php echo U($sidebar['module'].'/'.$sidebar['action'],$param);?>"><?php echo ($sidebar["name"]); ?></a></li><?php endforeach; endif; else: echo "" ;endif; ?></ol><?php }else{ ?><div id="a_list"></div><?php } ?></div></div></div></body></html>