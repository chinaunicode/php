<style type="text/css">
	
	.t_input{ padding: 6px; border: 1px solid #ccc; }
	.loginli{ margin:0 0 15px 0; padding: 0; }
</style>
<div class="panel_content">
	<ul class="sidebar_login">
		<h3>welcome!</h3>
		<li><a href="javascript:;" id="sidebar_login_request">前台登录</a></li>
		<li><a href="m.php">后台登录</a></li>
		<div class="clear"></div>
	</ul>
</div>
<script type="text/javascript">window.jQuery || document.write('<script type="text/javascript"src="__JS__/jQuery/jquery.js"><\/script>');</script>
<link href="__JS__/jQuery/plugin/artDialog/skins/default.css" rel="stylesheet" />
<script type="text/javascript" src="__JS__/jQuery/plugin/artDialog/artDialog.js"></script>
<script type="text/javascript" src="__JS__/NDlogpublic.js"></script>
<script type="text/javascript">
	$(function(){
		$('#sidebar_login_request').live('click',function(){
			$.dialog({
				title : '快速登录',
				content : '<table>\
						<tr>\
							<td>账号：</td>\
							<td><input type="text" id="account" class="t_input" /><span></span></td>\
						</tr>\
						<tr>\
							<td>密码：</td>\
							<td><input type="password" id="password" class="t_input" /><span></span></td>\
						</tr>\
						<tr>\
							<td>验证码：</td>\
							<td><input type="text" id="verify" class="t_input" /><span></span> <img id="verifyImg" SRC="m.php?m=public&a=verify" onClick="fleshVerify()" border="0" alt="点击刷新验证码" style="cursor:pointer" align="absmiddle"></td>\
						</tr>\
						<tr>\
							<td></td>\
							<td><input type="button" id="dologin" class="t_input" value="登录" /></td>\
						</tr>\
					</table>',
				lock : true,
				fixed: true
			});
		});
		$('#dologin').live('click',function(){
			var _this = $(this);
			var account = $('#account');
			var password = $('#password');
			var verify = $('#verify');
			var account_val = $.trim(account.val());
			var password_val = $.trim(password.val());
			var verify_val = $.trim(verify.val());
			if ( account_val == '' ){
				NDlog._showErrorInfo( account, '用户名不能为空！' );
				return false;
			}else if( password_val == '' ){
				NDlog._showErrorInfo( password, '密码不能为空！' );
				return false;
			}else if( verify_val == '' ){
				NDlog._showErrorInfo( verify, '验证码必须填写！' );
				return false;
			}else{
				$.ajax({
					url : 'm.php?m=public&a=checklogin',
					success : function( _return ){
						if ( _return.status == 0 ){
							$('#'+_return.url)
								.css('border-color','#cd9c9c')
								.focus()
								.next('span')
								.addClass('error')
								.css('color','#c20000')
								.text(_return.info);
						}else{
							_this.attr('disabled','disabled').val('登录中...');
							window.location.reload();
						}
					},
					cache : false,
					data : {
						'account' : account_val,
						'password' : password_val,
						'verify' : verify_val
					},
					dataType : 'json',
					type : 'POST'
				});
			}
		});
	});
</script>