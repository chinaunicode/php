<!doctype html>
<html>
	<head>
		<title>{:C('SITE_TITLE')}</title>
		<meta charset="utf-8" />
		<include file="Public:commonjs" />
		<link rel="stylesheet" type="text/css" href="../Public/style/layout.css" />
		<script type="text/javascript" src="__JS__/jQuery/jquery.js"></script>
		<script type="text/javascript" src="__JS__/jQuery/plugin/cookie.js"></script>
		<script type="text/javascript" src="../Public/js/common.js"></script>
		<script type="text/javascript">
			jQuery(document).ready(function($){
				$('.submit1').click(function(){
					$('.ibox').hide();
					$('div[rel="'+$(this).attr('name')+'"]').show();
				});

				$('.checkFrom').submit(
					function(){
						var _self = $(this);
						var _isArray = function(obj){
							return Object.prototype.toString.call(obj) === '[object Array]';
						}
						$.ajax({
							url : '{:U("anyreadpost")}',
							type : 'POST',
							data : _self.serialize(),
							success : function( data ){
								var _data = data.data;
								if ( data.status == 1 ){
									switch( _data.style ){
										case 'js' :
											var _html = '<script src="\/index.php?s='+_data.jsstr+'"><\/script>';
											$('#result').val(_html);
										break;

										case 'json' :
											var _html = '<script src="\/index.php?s='+_data.jsstr+'"><\/script>';
											$('#result').val(_html);
										break;

										case 'volist' :
											var _html = '<';
											_html += '?php'+"\r\n";
											_html += '$free_model = D("'+_data.model+'");'+"\r\n";
											_html += '$free_where["status"] = 1;'+"\r\n";
											if ( typeof _data.where.thumb !== "undefined" ){
												_html += '$free_where["thumb"] = array("neq","");'+"\r\n";
											}
											if ( typeof _data.where.summary !== "undefined" ){
												_html += '$free_where["summary"] = array("neq","");'+"\r\n";
											}
											if ( typeof _data.where.type !== "undefined" ){
												_html += '$free_where["type"] = "'+_data.where.type+'";'+"\r\n";
											}
											if ( typeof _data.where.logo !== "undefined" ){
												_html += '$free_where["logo"] = array("neq","");'+"\r\n";
											}
											_html += '$free_list = $free_model->where($free_where)->order("'+_data.order+'")->limit("'+_data.limit+'")->select();'+"\r\n";
											_html += 'if ( !empty( $free_list ) ){ '+"\r\n";
											_html += '?>'+"\r\n";
											_html += '<ul>'+"\r\n";
											_html += '<';
											_html += 'volist name="free_list" id="free_list">'+"\r\n";
											_html += '<li><a href="{';
											switch( _data.model ){
												case 'Archives' : 
													_html += ':U("\/views\/".$free_list["id"])}">{';
													_html += '$free_list.title|utf8Str="'+_data.title_len+'"}</a></li>'+"\r\n";
												break;

												case 'Flink' : 
													_html += '$free_list.url}" target="_blank">{';
													_html += '$free_list.name|utf8Str="'+_data.title_len+'"}</a></li>'+"\r\n";
												break;

												case 'Guestbook' : 
													_html += ':U("\/guestbook")}">{';
													_html += '$free_list.content}</a></li>'+"\r\n";
												break;

											}
											_html += '<\/volist>'+"\r\n";
											_html += '</ul>'+"\r\n";
											_html += '<';
											_html += '?php'+"\r\n";
											_html += '}'+"\r\n";
											_html += 'unset( $free_model, $free_where, $free_list );'+"\r\n";
											_html += '?>'+"\r\n";
											$('#result').val(_html);
										break;
									}
								}
							},
							dataType : 'json',
							cache : false
						});
						return false;
					}
				);
			});
		</script>
		<style type="text/css" media="all">
			table tr td				{ border: 0; }
			.ibox					{ display: none; }
			.notice					{ line-height: 24px; font-size: 14px; color:#c20000; }
			.t_input				{ padding: 6px; }
		</style>
	</head>
	<body>
		<div id="wrap">
			<include file="Public:header" />
			<div id="container">
				<div id="sidebar_switch"></div>
				<div id="content">
					<div id="c_warp">
						<div class="other_l" id="anyread">
							<div>
								<input type="button" name="archives" id="archives" class="submit submit1" value="自定义调用文档类" />  &nbsp;&nbsp;&nbsp; 
								<input type="button" name="flink" id="flink" class="submit submit1" value="自定义调用友情链接" />  &nbsp;&nbsp;&nbsp; 
								<input type="button" name="guestbook" id="guestbook" class="submit submit1" value="自定义调用留言" />
							</div>
							<br />
							<div rel="archives" class="ibox" style="display:block;">
								<h3>文章类调用</h3>
								<br />
								<form id="archivesForm" class="checkFrom">
									<input type="hidden" name="model" value="Archives" />
									<table class="table_form" cellpadding="0" cellspacing="0" border="0" width="100%">
										<tr>
											<td align="right" width="60">调用模块</td>
											<td>
												<input type="radio" name="arctype" value="" checked="checked" /> 全部文档 &nbsp;&nbsp;&nbsp; 
												<input type="radio" name="arctype" value="article" /> 文章类 &nbsp;&nbsp;&nbsp; 
												<input type="radio" name="arctype" value="picture" /> 图集类 &nbsp;&nbsp;&nbsp; 
												<input type="radio" name="arctype" value="music" /> 音乐类 &nbsp;&nbsp;&nbsp; 
												<input type="radio" name="arctype" value="video" /> 视频类 &nbsp;&nbsp;&nbsp; 
											</td>
										</tr>
										<tr>
											<td align="right">调用数目</td>
											<td><input type="text" name="qty" class="t_input" value="10" /></td>
										</tr>
										<tr>
											<td align="right">排序方式</td>
											<td>
												<select name="orderby" class="t_input">
													<option value="" selected="selected"> -- 请选择排序方式 -- </option>
													<option value="id">发布时间</option>
									                <option value="update_time">修改时间</option>
									                <option value="click">点击量</option>
									                <option value="count">评论数</option>
									                <option value="rand">随机获取</option>
												</select>
												 &nbsp;&nbsp;&nbsp; 
												<input name="order" type="radio" value="DESC" checked="checked"> 由高到低  &nbsp;&nbsp;&nbsp; 
												<input name="order" type="radio" value="ASC"> 由低到高
											</td>
										</tr>
										<tr>
											<td align="right">标题长度</td>
											<td><input type="text" name="title_len" class="t_input" value="30" /> *三个字节等于一个汉字</td>
										</tr>
										<tr>
											<td align="right">附加条件</td>
											<td>
												<input type="checkbox" name="summary" value="1" /> 带有摘要  &nbsp;&nbsp;&nbsp; 
												<input type="checkbox" name="thumb" value="1" /> 带有缩略图
											</td>
										</tr>
										<tr>
											<td align="right">调用方式</td>
											<td>
												<input type="radio" name="style" value="js" /> JS调用  &nbsp;&nbsp;&nbsp; 
												<input type="radio" name="style" value="volist" checked="checked" /> volist 标签  &nbsp;&nbsp;&nbsp; 
												<input type="radio" name="style" value="json" /> JSON 数组
											</td>
										</tr>
										<tr>
											<td align="right"></td>
											<td><input type="submit" value="获取代码" class="submit" /></td>
										</tr>
										
									</table>
								</form>
							</div>

							<div rel="flink" class="ibox">
								<h3>友情链接调用</h3>
								<br />
								<form id="flinkFrom" class="checkFrom">
									<input type="hidden" name="model" value="Flink" />
									<table class="table_form" cellpadding="0" cellspacing="0" border="0" width="100%">
										<tr>
											<td align="right">调用数目</td>
											<td><input type="text" name="qty" class="t_input" value="10" /></td>
										</tr>
										<tr>
											<td align="right">排序方式</td>
											<td>
												<select name="orderby" class="t_input">
													<option value="" selected="selected"> -- 请选择排序方式 -- </option>
													<option value="id">添加时间</option>
									                <option value="sort">自定义</option>
									                <option value="rand">随机获取</option>
												</select>
												 &nbsp;&nbsp;&nbsp; 
												<input name="order" type="radio" value="DESC" checked="checked"> 由高到低  &nbsp;&nbsp;&nbsp; 
												<input name="order" type="radio" value="ASC"> 由低到高
											</td>
										</tr>
										<tr>
											<td align="right">标题长度</td>
											<td><input type="text" name="title_len" class="t_input" value="30" /> *三个字节等于一个汉字</td>
										</tr>
										<tr>
											<td align="right">附加条件</td>
											<td>
												<input type="checkbox" name="logo" value="1" /> 带有LOGO
											</td>
										</tr>
										<tr>
											<td align="right">调用方式</td>
											<td>
												<input type="radio" name="style" value="js" /> JS调用  &nbsp;&nbsp;&nbsp; 
												<input type="radio" name="style" value="volist" checked="checked" /> volist 标签  &nbsp;&nbsp;&nbsp; 
												<input type="radio" name="style" value="json" /> JSON 数组
											</td>
										</tr>
										<tr>
											<td align="right"></td>
											<td><input type="submit" value="获取代码" class="submit" /></td>
										</tr>
										
									</table>
								</form>
							</div>

							<div rel="guestbook" class="ibox">
								<h3>留言调用</h3>
								<br />
								<form id="guestBookFrom" class="checkFrom">
									<input type="hidden" name="model" value="Guestbook" />
									<table class="table_form" cellpadding="0" cellspacing="0" border="0" width="100%">
										<tr>
											<td align="right">调用数目</td>
											<td><input type="text" name="qty" class="t_input" value="10" /></td>
										</tr>
										<tr>
											<td align="right">排序方式</td>
											<td>
												<select name="orderby" class="t_input">
													<option value="" selected="selected"> -- 请选择排序方式 -- </option>
													<option value="id">留言时间</option>
									                <option value="rand">随机获取</option>
												</select>
												 &nbsp;&nbsp;&nbsp; 
												<input name="order" type="radio" value="DESC" checked="checked"> 由高到低  &nbsp;&nbsp;&nbsp; 
												<input name="order" type="radio" value="ASC"> 由低到高
											</td>
										</tr>
										<tr>
											<td align="right">调用方式</td>
											<td>
												<input type="radio" name="style" value="js" /> JS调用  &nbsp;&nbsp;&nbsp; 
												<input type="radio" name="style" value="volist" checked="checked" /> volist 标签  &nbsp;&nbsp;&nbsp; 
												<input type="radio" name="style" value="json" /> JSON 数组
											</td>
										</tr>
										<tr>
											<td align="right"></td>
											<td><input type="submit" value="获取代码" class="submit" /></td>
										</tr>
										
									</table>
								</form>
							</div>
							<br />
							<div><textarea style="width:640px; height:260px;" class="t_input" id="result"></textarea></div>
							<br />
							<div class="notice">
								说明：
								<ol>
									<li>JS 调用：直接将JS代码拷贝至页面想要放置的位置即可。(不懂任何代码)</li>
									<li>volist ：直接将JS代码拷贝至页面想要放置的位置即可，也可修改html部分。(懂一些html代码知识)</li>
									<li>json ：此调用方式数据会存储在 json_result 变量中。具体参考JSON相关知识(懂JS知识)。</li>
								</ol>
							</div>
						</div>
					</div>
				</div>
				<include file="Public:sidebar" />
			</div>
		</div>
	</body>
</html>