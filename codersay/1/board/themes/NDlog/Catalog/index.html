<!doctype html>
<html>
	<head>
		<title>{:C('SITE_TITLE')}</title>
		<meta charset="utf-8" />
		<include file="Public:commonjs" />
		<link rel="stylesheet" type="text/css" href="../Public/style/layout.css" />
		<script type="text/javascript" src="__JS__/jQuery/jquery.js"></script>
		<script type="text/javascript" src="__JS__/jQuery/plugin/cookie.js"></script>
		<script type="text/javascript" src="__JS__/NDlogpublic.js"></script>
		<script type="text/javascript" src="../Public/js/common.js"></script>
		<script type="text/javascript">
			$(function(){
				NDlog._setTableStyle( 'input[name="all"]', 'input[name="ids[]"]', '.rows_style' );
				$('.esort').dblclick(function(){
					var id = $(this).attr('rel');
					var ovalue = $(this).text();
					$(this).html('<input type="text" name="sort_one" id="edit_'+id+'" class="t_input" style="width:24px;" value="'+ovalue+'" />');
					$('#edit_'+id).focus().live('blur',function(){
						var value = $(this).val();
						if ( !/^\d+$/.test(value) ){
							alert('排序必须为正整数！');
							return false;
						}else{
							$(this).parent().html(value);
							if ( ovalue != value ){
								$.post('{:U("updateOneSort")}',{id:id,sort:value});
							}
						}
					});
				});
				$('.ename').dblclick(function(){
					var tis = $(this);
					var id = tis.attr('rel');
					var val = tis.text();
					tis.html('<input type="text" name="name_one" id="edit_name_'+id+'" class="t_input" value="'+val+'" />');
					$('#edit_name_'+id).focus().live('blur',function(){
						var value = $(this).val();
						tis.html( value );
						if ( value != val ){
							$.post('{:U("updateOneName")}',{id:id,name:value});
						}
					});
				});
			})
		</script>
		<style type="text/css">
			.cat_display	{ display: block; width:16px; height:16px; background:url(/board/themes/DBloger/Public/images/display.gif) no-repeat; }
			.cat_hidden		{ display: block; width:16px; height:16px; background:url(/board/themes/DBloger/Public/images/hidden.gif) no-repeat; }
			.left_c			{ width:60px; display: block; float: left; line-height: 26px; text-align:right; padding-right:10px; }
		</style>
	</head>
	<body>
		<div id="wrap">
			<include file="Public:header" />
			<div id="container">
				<div id="sidebar_switch"></div>
				<div id="content">
					<div id="c_warp">
						<div class="button">提示：标题或排序可双击即时更改。</div>
						<table width="100%" cellpadding="0" cellspacing="0" border="0" class="table_list mt">
							<tr style="background: #f0f7ff; font-weight: bold;">
								<th width="30" align="center" class="left_text">排序</th>
								<th width="60" align="center" class="left_text">编号</th>
								<th width="20" class="left_text"></th>
								<th align="center" class="left_text">分类名称</th>
								<th align="center" class="left_text">上级分类</th>
								<th align="center" class="left_text">类型</th>
								<th width="80" align="center" class="left_text">操作</th>
							</tr>
							{$list}
						</table>
					</div>
				</div>
				<include file="Public:sidebar" />
			</div>
		</div>
	</body>
</html>
