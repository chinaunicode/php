<!doctype html>
<html>
    <head>
        <title>{:C('SITE_TITLE')}</title>
        <meta charset="utf-8" />
        <include file="Public:commonjs" />
        <link rel="stylesheet" type="text/css" href="../Public/style/layout.css" />
        <script type="text/javascript" src="__JS__/jQuery/jquery.js"></script>
        <script type="text/javascript" src="__JS__/jQuery/plugin/cookie.js"></script>
        <script type="text/javascript" src="__JS__/NDlogpublic.js"></script>
        <script type="text/javascript" src="../Public/js/common.js"></script>
        <script type="text/javascript">
            jQuery(document).ready(function($){
            	var selfid = $('input[name="id"]').val();
            	$('#account').live('blur',function(){
            		var _this = $(this);
            		var value = $.trim( _this.val() );
            		if ( value != '' ){
            			$.ajax({
            				url : '{:U("checkAccount")}',
            				success : function( e ){
            					if ( e.status == 0 ){
            						NDlog._showErrorInfo(_this,e.data);
            						return false;
            					}
            				},
            				data : 'id='+selfid+'&account='+value,
            				cache : false,
            				type : 'POST'
            			});
            		}
            	});
                $('form').submit(function(){
                	var account = $('#account');
                	var password = $('#password');
                	var repassed = $('#repassed');
                	var passval = $.trim( password.val() );
                	var repsval = $.trim( repassed.val() );
                	
                	if ( $.trim( account.val() ) == '' ){
                		NDlog._showErrorInfo( account, '账号必须填写！' );
                		return false;
                	}
                	if ( passval == '' && repsval != '' ){
                		NDlog._showErrorInfo( password, '请再次填写密码！' );
                		return false;
                	}else if( passval != '' && repsval == '' ){
                		NDlog._showErrorInfo( repassed, '请再次填写密码！' );
                		return false;
                	}else if( passval != '' && repsval != '' && passval != repsval ){
                		NDlog._showErrorInfo( repassed, '你两次输入的密码不同，请重新输入！' );
                		return false;
                	}
                });
                NDlog._checkErrorInput($('.error_input'));
            });
        </script>
        <style type="text/css">
        	.t_input{ padding:6px; }
        </style>
    </head>
    <body>
        <div id="wrap">
            <include file="Public:header" />
            <div id="container">
                <div id="sidebar_switch"></div>
                <div id="content">
                    <div id="c_warp">
                        <form id="editOtherForm" action="{:U("update")}" method="post">
							<input type="hidden" name="id" value="{$vo.id}" />
							<table class="table_form" cellpadding="0" cellspacing="0" border="0" width="100%">
								<tr>
									<td><input type="text" name="account" id="account" class="t_input w280" value="{$vo.account}" /><p class="remark">账号：用来登录的账号名称，不可重复，必填。</p></td>
								</tr>
								<tr>
									<td><input type="text" class="t_input w280" name="nickname" id="nickname" value="{$vo.nickname}" /><p class="remark">昵称：用来显示用户的昵称，常用于前台显示作者名字。</p></td>
								</tr>
								<tr>
									<td><input type="text" class="t_input w280" name="email" value="{$vo.email}" /><p class="remark">邮箱：用户的邮箱，用来联络用户，在用户未设置头像时使用邮箱作为头像。</p></td>
								</tr>
								<tr>
									<td><input class="t_input w280" type="password" name="password" id="password" /><p class="remark">密码： *不填写则不修改</p></td>
								</tr>
								<tr>
									<td><input class="t_input w280" type="password" name="repassed" id="repassed" /><p class="remark">验证： *验证密码填写是否正确</p></td>
								</tr>
								<tr>
									<td><textarea class="t_input" name="remark" style="width:400px; height:100px;">{$vo.remark}</textarea><p class="remark">备注：</p></td>
								</tr>
								<tr>
									<td><input type="submit" value="提交修改" class="submit" id="editOtherPost" /></td>
								</tr>
							</table>
						</form>
                    </div>
                </div>
                <include file="Public:sidebar" />
            </div>
        </div>
    </body>
</html>